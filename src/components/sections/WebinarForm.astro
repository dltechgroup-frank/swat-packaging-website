---
import type { Locale } from '../../i18n/config';
import { t } from '../../i18n/utils';

interface Props {
  locale?: Locale;
  id?: string;
}

const { locale = 'es', id = 'webinar-form' } = Astro.props;
---

<div id={id} class="bg-gradient-to-br from-accent-400 to-accent-600 p-[2px] rounded-2xl shadow-xl" data-animate>
<div class="bg-white rounded-2xl p-6 lg:p-8">
  <h3 class="text-xl font-bold text-veritiv-900 mb-2">
    {t(locale, 'webinar.formTitle')}
  </h3>
  <p class="text-sm text-body-muted mb-6">
    {t(locale, 'webinar.formSubtext')}
  </p>

  <form action="https://api.web3forms.com/submit" method="POST" class="space-y-4">
    <input type="hidden" name="access_key" value="YOUR_ACCESS_KEY_HERE" />
    <input type="hidden" name="subject" value="Webinar Registration - Packaging Inteligente 2026" />
    <input type="hidden" name="from_name" value="SWAT Packaging Webinar" />
    <input type="hidden" name="source" value="webinar-landing-page" />
    <input type="checkbox" name="botcheck" class="hidden" />

    <!-- Name -->
    <div>
      <label for="webinar-name" class="block text-sm font-medium text-veritiv-700 mb-1">
        {t(locale, 'webinar.labelName')}
      </label>
      <input
        type="text"
        id="webinar-name"
        name="name"
        required
        placeholder={t(locale, 'webinar.placeholderName')}
        class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 placeholder:text-veritiv-400 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition"
      />
    </div>

    <!-- Email -->
    <div>
      <label for="webinar-email" class="block text-sm font-medium text-veritiv-700 mb-1">
        {t(locale, 'webinar.labelEmail')}
      </label>
      <input
        type="email"
        id="webinar-email"
        name="email"
        required
        placeholder={t(locale, 'webinar.placeholderEmail')}
        class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 placeholder:text-veritiv-400 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition"
      />
    </div>

    <!-- Company & Role -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label for="webinar-company" class="block text-sm font-medium text-veritiv-700 mb-1">
          {t(locale, 'webinar.labelCompany')}
        </label>
        <input
          type="text"
          id="webinar-company"
          name="company"
          required
          placeholder={t(locale, 'webinar.placeholderCompany')}
          class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 placeholder:text-veritiv-400 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition"
        />
      </div>
      <div>
        <label for="webinar-role" class="block text-sm font-medium text-veritiv-700 mb-1">
          {t(locale, 'webinar.labelRole')}
        </label>
        <input
          type="text"
          id="webinar-role"
          name="role"
          required
          placeholder={t(locale, 'webinar.placeholderRole')}
          class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 placeholder:text-veritiv-400 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition"
        />
      </div>
    </div>

    <!-- Phone -->
    <div>
      <label for="webinar-phone" class="block text-sm font-medium text-veritiv-700 mb-1">
        {t(locale, 'webinar.labelPhone')}
      </label>
      <input
        type="tel"
        id="webinar-phone"
        name="phone"
        required
        placeholder={t(locale, 'webinar.placeholderPhone')}
        class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 placeholder:text-veritiv-400 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition"
      />
    </div>

    <!-- Qualification Fields -->
    <div class="pt-2 border-t border-veritiv-100">
      <p class="text-xs text-body-muted mb-3 uppercase tracking-wider font-medium">
        {locale === 'es' ? 'Informaci√≥n adicional (opcional)' : 'Additional information (optional)'}
      </p>

      <div class="grid grid-cols-1 gap-4">
        <!-- Employees -->
        <div>
          <label for="webinar-employees" class="block text-sm font-medium text-veritiv-700 mb-1">
            {t(locale, 'webinar.labelEmployees')}
          </label>
          <select
            id="webinar-employees"
            name="employees"
            class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition bg-white"
          >
            <option value="" disabled selected>{t(locale, 'webinar.selectEmployees')}</option>
            <option value="1-10">{t(locale, 'webinar.optionEmployees1')}</option>
            <option value="11-50">{t(locale, 'webinar.optionEmployees2')}</option>
            <option value="51-200">{t(locale, 'webinar.optionEmployees3')}</option>
            <option value="200+">{t(locale, 'webinar.optionEmployees4')}</option>
          </select>
        </div>

        <!-- Monthly Spend -->
        <div>
          <label for="webinar-spend" class="block text-sm font-medium text-veritiv-700 mb-1">
            {t(locale, 'webinar.labelSpend')}
          </label>
          <select
            id="webinar-spend"
            name="monthly_packaging_spend"
            class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition bg-white"
          >
            <option value="" disabled selected>{t(locale, 'webinar.selectSpend')}</option>
            <option value="<$5K">{t(locale, 'webinar.optionSpend1')}</option>
            <option value="$5K-$20K">{t(locale, 'webinar.optionSpend2')}</option>
            <option value="$20K-$50K">{t(locale, 'webinar.optionSpend3')}</option>
            <option value="$50K+">{t(locale, 'webinar.optionSpend4')}</option>
          </select>
        </div>

        <!-- Operation Type -->
        <div>
          <label for="webinar-operation" class="block text-sm font-medium text-veritiv-700 mb-1">
            {t(locale, 'webinar.labelOperation')}
          </label>
          <select
            id="webinar-operation"
            name="operation_type"
            class="w-full px-4 py-3 rounded-lg border border-veritiv-200 text-sm text-veritiv-900 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:border-transparent transition bg-white"
          >
            <option value="" disabled selected>{t(locale, 'webinar.selectOperation')}</option>
            <option value="Manufacturing">{t(locale, 'webinar.optionOperation1')}</option>
            <option value="E-commerce">{t(locale, 'webinar.optionOperation2')}</option>
            <option value="Distribution">{t(locale, 'webinar.optionOperation3')}</option>
          </select>
        </div>
      </div>
    </div>

    <div class="h-captcha" data-captcha="true"></div>

    <button
      type="submit"
      class="w-full bg-accent-500 hover:bg-accent-600 text-white font-semibold py-5 rounded-lg transition-colors duration-200 text-sm focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 flex items-center justify-center gap-2"
    >
      {t(locale, 'webinar.submitButton')}
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
      </svg>
    </button>
    <p class="text-center text-xs text-red-500 font-medium mt-2">
      {t(locale, 'webinar.formUrgency')}
    </p>
  </form>
</div>
</div>

<script src="https://web3forms.com/client/script.js" async defer></script>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const webinarForm = document.querySelector('form[action*="web3forms"]');
    if (webinarForm) {
      webinarForm.addEventListener('submit', function() {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'webinar_registration', {
            'event_category': 'engagement',
            'event_label': 'Webinar Registration - Packaging Inteligente 2026'
          });
        }
        if (typeof fbq !== 'undefined') {
          fbq('track', 'Lead', {
            content_name: 'Webinar Registration - Packaging Inteligente 2026'
          });
        }
      });
    }
  });
</script>
