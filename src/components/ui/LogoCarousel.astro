---
interface Logo {
  name: string;
  src: string;
}

interface Props {
  logos: Logo[];
  speed?: number;
}

const { logos, speed = 40 } = Astro.props;
const duration = `${speed}s`;
---

<div class="logo-carousel" data-animate>
  <div class="carousel-track" style={`--duration: ${duration}`}>
    {logos.map((logo) => (
      <div class="carousel-item">
        <img src={logo.src} alt={logo.name} loading="lazy" width="120" height="48" />
      </div>
    ))}
    {logos.map((logo) => (
      <div class="carousel-item" aria-hidden="true">
        <img src={logo.src} alt="" loading="lazy" width="120" height="48" />
      </div>
    ))}
  </div>
</div>

<style>
  .logo-carousel {
    overflow: hidden;
    mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
    width: 100%;
  }

  .carousel-track {
    display: flex;
    align-items: center;
    gap: 2.5rem;
    width: max-content;
    animation: scroll var(--duration) linear infinite;
  }

  .carousel-track:hover {
    animation-play-state: paused;
  }

  .carousel-item {
    flex-shrink: 0;
  }

  .carousel-item img {
    height: 2rem;
    width: auto;
    max-width: 7rem;
    object-fit: contain;
    filter: grayscale(100%);
    opacity: 0.5;
    transition: all 0.3s ease;
  }

  .carousel-item:hover img {
    filter: grayscale(0%);
    opacity: 1;
  }

  @media (min-width: 1024px) {
    .carousel-item img {
      height: 2.5rem;
      max-width: 9rem;
    }

    .carousel-track {
      gap: 3rem;
    }
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
</style>
